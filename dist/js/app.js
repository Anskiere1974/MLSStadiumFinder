function mapError(){alert("Sorry we have a problem loading the Google Map. Drink a cup of coffee and retry later.")}var Teams=function(e){this.name=ko.observable(e.name),this.stadium=ko.observable(e.stadium),this.capacity=ko.observable(e.capacity),this.lat=ko.observable(e.lat),this.lng=ko.observable(e.lng),this.conference=ko.observable(e.conference),this.visible=ko.observable(!0),this.address=ko.observable(e.address)},appViewModel=function(){var e=this;this.query=ko.observable(""),this.teamList=ko.observableArray([]),this.liveSearch=function(t){e.teamList().forEach(function(t){t.name().toLowerCase().indexOf(e.query().toLowerCase())>=0?(t.visible(!0),t.marker.setVisible(!0)):(t.visible(!1),t.marker.setVisible(!1))})},this.createTeamList=function(){for(var t=0;t<teamData.length;t++)e.teamList.push(new Teams(teamData[t]))},this.filter=function(t){for(var a=0;a<teamData.length;a++)teamData[a].conference===t&&e.teamList.push(new Teams(teamData[a]));e.createMarker()},this.filterWest=function(){e.removeMarker(),e.teamList.removeAll(),e.query(""),e.filter("west")},this.filterEast=function(){e.removeMarker(),e.teamList.removeAll(),e.query(""),e.filter("east")},this.filterAll=function(){e.removeMarker(),e.teamList.removeAll(),e.query(""),e.createTeamList(),e.createMarker()},this.createMarker=function(){for(var t=0;t<e.teamList().length;t++){var a=e.teamList()[t].name(),r="images/"+(a=(a=(a=a.toLowerCase()).replace(/\./g,"")).replace(/ /g,""))+".png",o=new google.maps.Marker({map:e.map,icon:{url:r,size:new google.maps.Size(32,32),anchor:new google.maps.Point(16,32)},position:{lat:e.teamList()[t].lat(),lng:e.teamList()[t].lng()},title:e.teamList()[t].name(),stadium:e.teamList()[t].stadium(),capacity:e.teamList()[t].capacity(),animation:google.maps.Animation.DROP,address:teamData[t].address});o.addListener("click",function(){e.letsBounce(this),e.getGeocodeAddress(this)}),e.teamList()[t].marker=o}},this.removeMarker=function(){e.teamList().forEach(function(e){e.marker.setMap(null)})},this.letsBounce=function(e){e.setAnimation(google.maps.Animation.BOUNCE),setTimeout(function(){e.setAnimation(null)},1400)},this.handleMarker=function(){e.letsBounce(this.marker),e.getGeocodeAddress(this.marker)},this.populateInfoWindow=function(e,t){t.marker!=e&&(t.marker=e,t.setContent('<div class="marker-title">'+e.title+'</div><img src="https://maps.googleapis.com/maps/api/staticmap?center='+e.position.lat()+","+e.position.lng()+'&zoom=16&size=200x200&maptype=hybrid&key=AIzaSyCKRKYTqc_igfzoYRi0-fgyKDm21AVU_yU" alt="" /><div>'+e.stadium+"</div><div>"+e.address+"</div><div>capacity: "+e.capacity+"</div><div>weather: "+e.weather+"</div><div>temperature: "+e.temp+"Celsius</div>"),t.open(map,e),t.addListener("closeclick",function(){t.setMarker=null}))},this.getGeocodeAddress=function(t){var a=t.position.lat(),r=t.position.lng();$.ajax({url:"https://maps.googleapis.com/maps/api/geocode/json?latlng="+a+","+r+"&key=AIzaSyCKRKYTqc_igfzoYRi0-fgyKDm21AVU_yU",success:function(a){var r=a.results[0].formatted_address;t.address=r,e.getWeather(t)},error:function(){alert("Unable to reach GoogleMap Geocoding - please try again later")}})},this.getWeather=function(t){var a=t.position.lat(),r=t.position.lng();$.ajax({url:"http://api.openweathermap.org/data/2.5/weather?lat="+a+"&lon="+r+"&APPID=906ae1bd2537be3aefb269cb9a2f068a&units=metric",success:function(a){console.log(a),t.temp=a.main.temp,t.weather=a.weather[0].description,e.populateInfoWindow(t,e.infowindow)},error:function(){alert("Unable to reach Openweathermap.org - please try again later")}})},this.initMap=function(){var t={center:{lat:37.8,lng:-101.5},zoom:5,mapTypeControl:!1,streetViewControl:!1,zoomControl:!1,fullscreenControl:!1,styles:[{elementType:"geometry",stylers:[{color:"#ebe3cd"}]},{elementType:"labels.text.fill",stylers:[{color:"#523735"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f1e6"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c9b2a6"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#dcd2be"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#ae9e90"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#93817c"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#a5b076"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#447530"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#f5f1e6"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#fdfcf8"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#f8c967"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#e9bc62"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#e98d58"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{color:"#db8555"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#806b63"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#8f7d77"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{color:"#ebe3cd"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#dfd2ae"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#b9d3c2"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#92998d"}]}]};e.map=new google.maps.Map(document.getElementById("map"),t),e.infowindow=new google.maps.InfoWindow},this.initMap(),this.createTeamList(),this.createMarker()},init=function(){ko.applyBindings(new appViewModel)};$(document).ready(function(){$("#sidebar-btn").on("click",function(){$("#sidebar").toggleClass("visible")})});